<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum Thread - Fuels Quality</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Join the discussion about fuel quality and alternative energy sources.">
    <meta name="keywords" content="forum, fuels, quality, alternative energy, discussion, community">
    <meta name="author" content="FuelsQ Policy, Government and Public Affairs">
    <meta name="robots" content="index, follow">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Forum Thread - FuelsQ">
    <meta property="og:description" content="Join the discussion about fuel quality and alternative energy sources.">
    <meta property="og:url" content="https://www.fuelsq.com/forum/thread.html">
    <meta property="og:site_name" content="fuelsq.com">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">

    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <header>
        <nav class="topnav">
            <a href="/">Home</a>
            <a href="/forengineers.html">For Engineers</a>
            <a class="active" href="/forum/index.html">Forum</a>
            <a href="/contacts.html">Contacts</a>
        </nav>
    </header>

    <main>
        <section class="thread-header">
            <div class="top-bar">
                <h2>Forum Thread</h2>
                <a href="index.html" class="back-link">
                    <i class="fas fa-arrow-left"></i> Back to Forum
                </a>
            </div>
        </section>

        <section class="thread-content">
            <div class="thread-post" id="original-post">
                <!-- Thread content will be loaded here -->
            </div>

            <div class="comments-section">
                <h3>Comments</h3>
                <div class="comment-form">
                    <div class="form-group">
                        <label for="comment-author">Your Name</label>
                        <input type="text" id="comment-author" placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="comment-content">Your Comment</label>
                        <textarea id="comment-content" placeholder="Write your comment"></textarea>
                    </div>
                    <button id="add-comment" class="btn-primary">
                        <i class="fas fa-comment"></i> Add Comment
                    </button>
                </div>

                <div class="comments-container" id="comments-container">
                    <!-- Comments will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Created by FQ. Â© 2026</p>
    </footer>

    <!-- JavaScript -->
    <script src="../js/main.js"></script>
    <script src="data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const originalPost = document.getElementById('original-post');
            const commentsContainer = document.getElementById('comments-container');
            const commentAuthor = document.getElementById('comment-author');
            const commentContent = document.getElementById('comment-content');
            const addCommentBtn = document.getElementById('add-comment');

            // Get thread ID from URL
            const threadId = window.location.search.substring(1);

            // Find the thread
            const thread = threads.find(t => t.id === threadId);

            if (!thread) {
                originalPost.innerHTML = '<div class="error-message">Thread not found.</div>';
                return;
            }

            // Load thread content
            loadThreadContent(thread);

            // Load comments
            loadComments(thread.comments);

            // Event listeners
            addCommentBtn.addEventListener('click', handleAddComment);

            // Functions
            function loadThreadContent(thread) {
                const date = new Date(thread.date).toLocaleString();

                originalPost.innerHTML = `
                    <div class="post-header">
                        <h3 class="post-title">${thread.title}</h3>
                        <div class="post-meta">
                            <span class="post-author">by ${thread.author}</span>
                            <span class="post-date">${date}</span>
                        </div>
                    </div>
                    <div class="post-content">
                        ${thread.content}
                    </div>
                `;
            }

            function loadComments(comments) {
                if (comments.length === 0) {
                    commentsContainer.innerHTML = '<p class="no-comments">No comments yet. Be the first to comment!</p>';
                    return;
                }

                commentsContainer.innerHTML = '';

                comments.forEach(comment => {
                    const commentElement = createCommentElement(comment);
                    commentsContainer.appendChild(commentElement);
                });
            }

            function createCommentElement(comment) {
                const div = document.createElement('div');
                div.className = 'comment';

                const date = new Date(comment.date).toLocaleString();

                div.innerHTML = `
                    <div class="comment-header">
                        <span class="comment-author">${comment.author}</span>
                        <span class="comment-date">${date}</span>
                    </div>
                    <div class="comment-content">
                        ${comment.content}
                    </div>
                `;

                return div;
            }

            function handleAddComment() {
                const author = commentAuthor.value.trim() || 'Anonymous';
                const content = commentContent.value.trim();

                if (!content) {
                    alert('Please enter a comment.');
                    return;
                }

                // Create new comment
                const newComment = {
                    author,
                    content,
                    date: Date.now()
                };

                // Add to thread
                thread.comments.push(newComment);

                // Save to localStorage
                localStorage.setItem('threads', JSON.stringify(threads));

                // Add comment to UI
                const commentElement = createCommentElement(newComment);
                commentsContainer.appendChild(commentElement);

                // Clear form
                commentContent.value = '';

                // Scroll to new comment
                commentElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>